---
import Layout from '../layouts/Layout.astro';
import CardCaso from '../components/CardCaso.astro';
import { getCollection } from 'astro:content';

const allCasos = await getCollection('casos');
// Show top 2 recents for home page
const recentCasos = allCasos.slice(0, 2);
---

<Layout title="Destape R치pido | Expertos en Destapes y Fosas RM">
    <header class="min-h-screen flex items-center justify-center px-4 relative pt-20 pb-32 overflow-hidden">
        <!-- Optimized Hero Image -->
        <img src="/images/camio-haciendo-servicio-en-la-calle.webp" alt="Destape de alcantarillado en Santiago"
            class="absolute inset-0 w-full h-full object-cover -z-20" fetchpriority="high" width="1920" height="1080">

        <!-- Gradient Overlay -->
        <div class="absolute inset-0 bg-gradient-to-r from-slate-900/95 to-slate-900/70 -z-10"></div>

        <div class="max-w-6xl mx-auto w-full grid lg:grid-cols-2 gap-12 items-center relative z-10">

            <div class="text-left text-white fade-up pt-4">
                <div class="availability-badge inline-flex items-center gap-2 bg-white/10 backdrop-blur-sm border border-white/20 px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-widest mb-6"
                    data-theme="dark">
                    <span class="relative flex h-2 w-2">
                        <span class="ping-dot w-2 h-2 rounded-full bg-green-400 animate-pulse absolute"></span>
                        <span class="static-dot w-2 h-2 rounded-full bg-green-500 relative"></span>
                    </span>
                    <span>
                        <span class="unit-count">3</span> <span class="unit-text">Camiones disponibles RM</span>
                    </span>
                </div>

                <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold mb-6 leading-tight tracking-tight">
                    Destape de Ca침er칤as y <br>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-300">Limpieza de
                        Fosas en Santiago</span>
                </h1>

                <p class="text-xl text-slate-200 mb-4 max-w-2xl leading-relaxed font-medium">
                    Servicio premium sin sorpresas, sector oriente y zonas rurales.
                </p>
                <p class="text-base text-slate-400 mb-8 max-w-2xl leading-relaxed">
                    Atendemos Las Condes, Vitacura, Lo Barnechea, Providencia, La Reina y 칌u침oa, adem치s de Chicureo,
                    Colina, Lampa, Pirque y otras zonas rurales. Destapes sin romper, cami칩n limpiafosas y urgencias
                    24/7.
                </p>

                <!-- Trust Signals -->
                <div class="flex flex-wrap gap-4 mb-8 text-sm font-bold text-slate-300">
                    <div class="flex items-center gap-2 bg-slate-800/50 px-3 py-1.5 rounded-lg border border-slate-700">
                        <i class="fa-solid fa-certificate text-yellow-400"></i> +10 A침os de Experiencia
                    </div>
                    <div class="flex items-center gap-2 bg-slate-800/50 px-3 py-1.5 rounded-lg border border-slate-700">
                        <i class="fa-solid fa-file-invoice-dollar text-green-400"></i> Boleta o Factura
                    </div>
                    <div class="flex items-center gap-2 bg-slate-800/50 px-3 py-1.5 rounded-lg border border-slate-700">
                        <i class="fa-solid fa-shield-halved text-blue-400"></i> Resoluci칩n Sanitaria
                    </div>
                </div>

                <div class="flex flex-col sm:flex-row gap-4">
                    <a href="tel:+56930153632"
                        class="bg-brand-600 hover:bg-brand-700 text-white text-base font-bold py-4 px-8 rounded-xl shadow-xl shadow-brand-600/20 transition transform hover:-translate-y-1 text-center">
                        <i class="fa-solid fa-phone-volume mr-2"></i> Llamar Ahora
                    </a>
                    <a href="#servicios"
                        class="bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/30 text-white text-base font-bold py-4 px-8 rounded-xl transition text-center">
                        Ver Servicios
                    </a>
                </div>

                <div class="mt-8 flex items-center gap-6 text-sm text-slate-400 font-medium">
                    <span class="flex items-center gap-2"><i class="fa-solid fa-check text-green-400"></i> Llegada 45
                        min</span>
                    <span class="flex items-center gap-2"><i class="fa-solid fa-check text-green-400"></i>
                        Certificados</span>
                </div>
            </div>

            <div class="relative fade-up delay-100">
                <div class="absolute inset-0 bg-brand-600 rounded-3xl blur-2xl opacity-20 transform rotate-6"></div>
                <div class="relative bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-3xl shadow-2xl">
                    <h3 class="text-white text-lg font-bold mb-4 text-center">쮻칩nde es el problema?</h3>
                    <div class="space-y-4">

                        <!-- Zona Urbana / Edificios -->
                        <a href="/zonas/urbano"
                            class="bg-white hover:bg-blue-50 p-4 rounded-xl cursor-pointer transition-all group flex items-center gap-4 border border-transparent hover:border-blue-200">
                            <div
                                class="w-12 h-12 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xl group-hover:scale-110 transition-transform">
                                <i class="fa-solid fa-building"></i>
                            </div>
                            <div>
                                <h4 class="text-slate-900 font-bold">Zona Urbana / Edificios</h4>
                                <p class="text-xs text-slate-500 mt-1">Las Condes, Vitacura, Providencia...</p>
                            </div>
                            <i class="fa-solid fa-chevron-right ml-auto text-slate-300"></i>
                        </a>

                        <!-- Zona Rural / Parcelas + disponibilidad -->
                        <div class="space-y-3">
                            <a href="/zonas/rural"
                                class="bg-white hover:bg-green-50 p-4 rounded-xl cursor-pointer transition-all group flex items-center gap-4 border border-transparent hover:border-green-200">
                                <div
                                    class="w-12 h-12 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xl group-hover:scale-110 transition-transform">
                                    <i class="fa-solid fa-tree"></i>
                                </div>
                                <div>
                                    <h4 class="text-slate-900 font-bold">Zona Rural / Parcelas</h4>
                                    <p class="text-xs text-slate-500 mt-1">Chicureo, Pirque, Colina, Lampa...</p>
                                </div>
                                <i class="fa-solid fa-chevron-right ml-auto text-slate-300"></i>
                            </a>

                            <!-- Badge de disponibilidad SOLO debajo de la rural -->
                            <div class="availability-badge hidden md:flex w-full bg-green-50 border border-green-200 rounded-xl py-3 items-center justify-center gap-2 text-[11px] font-bold text-green-800 transition-all duration-500 opacity-0"
                                role="status">
                                <span class="relative flex h-2 w-2">
                                    <span
                                        class="ping-dot absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                                    <span
                                        class="static-dot relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                                </span>
                                <span>
                                    <span class="unit-count">...</span>
                                    <span class="unit-text">buscando...</span>
                                </span>
                            </div>
                        </div>

                    </div>
                </div>
            </div>


        </div>
        <div class="absolute bottom-0 left-0 right-0 z-0 pointer-events-none" style="max-height: 200px;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"
                class="w-full h-auto text-slate-50 fill-current">
                <path fill-opacity="1"
                    d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z">
                </path>
            </svg>
        </div>
    </header>

    <section class="py-10 bg-slate-50 border-b border-slate-200">
        <div class="container mx-auto px-4">
            <div
                class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center grayscale opacity-70 hover:grayscale-0 hover:opacity-100 transition-all duration-500">
                <div class="flex flex-col items-center gap-2">
                    <i class="fa-solid fa-medal text-3xl text-yellow-500"></i>
                    <span class="font-bold text-slate-700 text-sm">Garant칤a Total</span>
                </div>
                <div class="flex flex-col items-center gap-2">
                    <i class="fa-solid fa-clock text-3xl text-brand-500"></i>
                    <span class="font-bold text-slate-700 text-sm">Servicio 24/7</span>
                </div>
                <div class="flex flex-col items-center gap-2">
                    <i class="fa-solid fa-truck-fast text-3xl text-slate-700"></i>
                    <span class="font-bold text-slate-700 text-sm">Flota Propia</span>
                </div>
                <div class="flex flex-col items-center gap-2">
                    <i class="fa-solid fa-file-invoice-dollar text-3xl text-green-500"></i>
                    <span class="font-bold text-slate-700 text-sm">Precios Claros</span>
                </div>
            </div>
        </div>
    </section>

    <section id="servicios" class="py-24 bg-white relative">
        <div class="container mx-auto px-4">
            <div class="text-center mb-20">
                <span class="text-brand-600 font-bold uppercase tracking-widest text-xs mb-2 block">Nuestras
                    Soluciones</span>
                <h2 class="text-3xl md:text-5xl font-extrabold text-slate-900 mb-6">Expertos en cada tuber칤a</h2>
                <p class="text-lg text-slate-500 max-w-2xl mx-auto">
                    Desde un departamento en piso 10 hasta una parcela de agrado. Tenemos la maquinaria espec칤fica para
                    cada situaci칩n.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                <div
                    class="group bg-white rounded-3xl p-8 border border-slate-100 shadow-lg hover:shadow-hover-card transition-all duration-300 hover:-translate-y-2">
                    <div
                        class="w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center text-brand-600 text-2xl mb-6 group-hover:bg-brand-600 group-hover:text-white transition-colors">
                        <i class="fa-solid fa-toilet"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-3 text-slate-900">Destapes Urbanos</h3>
                    <p class="text-slate-500 mb-6 leading-relaxed text-sm">
                        Tecnolog칤a de varillas y aire comprimido para WC, duchas y lavaplatos. Sin romper pisos ni
                        ensuciar tu hogar.
                    </p>
                    <ul class="space-y-2 mb-8 text-sm text-slate-600">
                        <li class="flex items-center gap-2"><i class="fa-solid fa-check-circle text-brand-500"></i>
                            Sector Oriente</li>
                        <li class="flex items-center gap-2"><i class="fa-solid fa-check-circle text-brand-500"></i>
                            Atenci칩n inmediata</li>
                    </ul>
                    <a href="/servicios/destape-alcantarillado"
                        class="inline-flex items-center text-brand-600 font-bold hover:gap-2 transition-all">Ver
                        detalles <i class="fa-solid fa-arrow-right ml-2 text-xs"></i></a>
                </div>

                <div
                    class="group bg-slate-900 rounded-3xl p-8 border border-slate-800 shadow-2xl hover:shadow-brand-900/50 transition-all duration-300 hover:-translate-y-2 relative overflow-hidden">
                    <div
                        class="absolute top-0 right-0 bg-gradient-to-l from-brand-600 to-brand-500 text-white text-[10px] font-bold px-4 py-1 rounded-bl-xl uppercase">
                        M치s Solicitado</div>

                    <div
                        class="w-16 h-16 bg-slate-800 rounded-2xl flex items-center justify-center text-brand-400 text-2xl mb-6 group-hover:bg-brand-500 group-hover:text-white transition-colors">
                        <i class="fa-solid fa-truck-droplet"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-3 text-white">Limpieza de Fosas</h3>
                    <p class="text-slate-400 mb-6 leading-relaxed text-sm">
                        Servicio integral para parcelas. Cami칩n de alto vac칤o, limpieza de c치maras, revisi칩n de drenajes
                        y certificaci칩n final.
                    </p>
                    <ul class="space-y-2 mb-8 text-sm text-slate-300">
                        <li class="flex items-center gap-2"><i class="fa-solid fa-check-circle text-brand-400"></i>
                            Chicureo / Pirque / Lampa</li>
                        <li class="flex items-center gap-2"><i class="fa-solid fa-check-circle text-brand-400"></i>
                            Disposici칩n autorizada</li>
                    </ul>
                    <a href="/servicios/limpieza-fosas-septicas"
                        class="inline-flex items-center text-white font-bold hover:gap-2 transition-all">Cotizar
                        Cami칩n <i class="fa-solid fa-arrow-right ml-2 text-xs"></i></a>
                </div>

                <div
                    class="group bg-white rounded-3xl p-8 border border-slate-100 shadow-lg hover:shadow-hover-card transition-all duration-300 hover:-translate-y-2">
                    <div
                        class="w-16 h-16 bg-green-50 rounded-2xl flex items-center justify-center text-green-600 text-2xl mb-6 group-hover:bg-green-600 group-hover:text-white transition-colors">
                        <i class="fa-solid fa-building-user"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-3 text-slate-900">Edificios y Condominios</h3>
                    <p class="text-slate-500 mb-6 leading-relaxed text-sm">
                        Planes de mantenci칩n preventiva para comunidades. Limpieza de verticales, c치maras desgrasadoras
                        y bombas.
                    </p>
                    <ul class="space-y-2 mb-8 text-sm text-slate-600">
                        <li class="flex items-center gap-2"><i class="fa-solid fa-check-circle text-green-500"></i>
                            Facturaci칩n empresa</li>
                        <li class="flex items-center gap-2"><i class="fa-solid fa-check-circle text-green-500"></i>
                            Informes t칠cnicos</li>
                    </ul>
                    <a href="/servicios/destape-alcantarillado#mantencion"
                        class="inline-flex items-center text-green-600 font-bold hover:gap-2 transition-all">Ver
                        Planes <i class="fa-solid fa-arrow-right ml-2 text-xs"></i></a>
                </div>
            </div>
        </div>
    </section>

    <section id="zonas" class="py-24 bg-brand-50 border-y border-brand-100">
        <div class="container mx-auto px-4">
            <div class="grid lg:grid-cols-2 gap-16 items-center">
                <div>
                    <span class="text-brand-600 font-bold uppercase tracking-widest text-xs mb-2 block">Cobertura</span>
                    <h2 class="text-3xl md:text-4xl font-extrabold text-slate-900 mb-6">Llegamos donde otros no llegan
                    </h2>
                    <p class="text-lg text-slate-600 mb-8 leading-relaxed">
                        Nuestra flota est치 estrat칠gicamente ubicada para reducir los tiempos de respuesta. Dividimos
                        nuestros equipos en escuadrones urbanos y rurales.
                    </p>

                    <div class="space-y-6">
                        <div class="flex gap-4 p-4 bg-white rounded-xl shadow-sm border border-brand-100">
                            <div
                                class="w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center flex-shrink-0 font-bold">
                                U</div>
                            <div>
                                <h4 class="font-bold text-slate-900">Escuadr칩n Urbano</h4>
                                <p class="text-sm text-slate-500 mt-1">Las Condes, Vitacura, Lo Barnechea, Providencia,
                                    La Reina, 칌u침oa.</p>
                            </div>
                        </div>
                        <div class="flex gap-4 p-4 bg-white rounded-xl shadow-sm border border-green-100">
                            <div
                                class="w-10 h-10 rounded-full bg-green-100 text-green-600 flex items-center justify-center flex-shrink-0 font-bold">
                                R</div>
                            <div>
                                <h4 class="font-bold text-slate-900">Escuadr칩n Rural</h4>
                                <p class="text-sm text-slate-500 mt-1">Colina (Chicureo), Pirque, Calera de Tango,
                                    Lampa, Buin, Paine.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div
                    class="relative bg-white p-2 rounded-3xl shadow-2xl rotate-2 hover:rotate-0 transition-transform duration-500 group">

                    <div class="aspect-video bg-slate-100 rounded-2xl overflow-hidden relative" id="map-wrapper">

                        <!-- Facade / Placeholder -->
                        <div onclick="document.getElementById('map-placeholder').style.opacity = '0'; setTimeout(() => { document.getElementById('map-placeholder').remove(); const iframe = document.createElement('iframe'); iframe.src = 'https://www.google.com/maps/d/u/0/embed?mid=1GWu__WSjUdqhH3ITLyqwyGQAHQBi9Qc&ehbc=2E312F&z=9'; iframe.className = 'absolute -top-[65px] left-0 w-full h-[calc(100%+60px)] fade-up'; iframe.style.border = '0'; iframe.allowFullscreen = true; iframe.loading = 'lazy'; iframe.referrerPolicy = 'no-referrer-when-downgrade'; iframe.title = 'Mapa de Cobertura'; document.getElementById('map-wrapper').appendChild(iframe); }, 300);"
                            class="absolute inset-0 z-10 flex flex-col items-center justify-center bg-slate-100 hover:bg-slate-50 transition-colors cursor-pointer group-hover:scale-105 transition-transform duration-700"
                            id="map-placeholder">

                            <div
                                class="w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-4 shadow-sm">
                                <i class="fa-solid fa-map-location-dot text-2xl text-brand-500"></i>
                            </div>

                            <span
                                class="bg-white text-slate-700 font-bold text-xs px-6 py-3 rounded-full shadow-lg border border-slate-200 select-none transition-transform duration-300 group-hover:scale-110">
                                游둟 Ver Mapa de Cobertura
                            </span>
                            <p class="mt-4 text-xs text-slate-400">Haz clic para cargar el mapa interactivo</p>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Blog/Casos Section -->
    <section id="blog-casos" class="py-24 bg-slate-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <span class="text-brand-600 font-bold uppercase tracking-widest text-xs mb-2 block">Casos Reales</span>
                <h2 class="text-3xl md:text-5xl font-extrabold text-slate-900 mb-6">Trabajos Recientes</h2>
                <p class="text-lg text-slate-500 max-w-2xl mx-auto mb-8">
                    Transparencia total. Mira c칩mo resolvemos problemas reales en hogares y empresas.
                </p>

                <!-- Filters Link -->
                 <div class="flex justify-center">
                    <a href="/casos-reales" class="text-brand-600 font-bold hover:underline">Ver filtro por categor칤as &rarr;</a>
                 </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
                {recentCasos.map((caso, index) => (
                    <CardCaso
                        {...caso.data}
                        slug={caso.slug}
                        delay={index * 100}
                    />
                ))}
            </div>

            <div class="text-center mt-12">
                <a href="/casos-reales"
                    class="inline-flex items-center text-brand-600 font-bold hover:gap-2 transition-all">
                    Ver todos los casos <i class="fa-solid fa-arrow-right ml-2 text-xs"></i>
                </a>
            </div>
        </div>
    </section>

    <section id="casos" class="py-24 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-extrabold text-center mb-16 text-slate-900">Clientes Satisfechos</h2>

            <!-- Elfsight Google Reviews -->
            <script src="https://elfsightcdn.com/platform.js" async is:inline></script>
            <div class="elfsight-app-267ae3c5-3d35-409a-b0df-8d8ac40550f9" data-elfsight-app-lazy></div>
        </div>
    </section>

    <section id="contacto" class="py-24 bg-white">
        <div class="container mx-auto px-4">
            <div
                class="bg-slate-900 rounded-3xl p-8 md:p-16 text-white shadow-2xl max-w-5xl mx-auto relative overflow-hidden text-center">
                <div class="absolute top-0 right-0 w-64 h-64 bg-brand-500 rounded-full blur-[100px] opacity-20"></div>
                <div class="absolute bottom-0 left-0 w-64 h-64 bg-green-500 rounded-full blur-[100px] opacity-20"></div>

                <div class="relative z-10">
                    <h2 class="text-3xl md:text-5xl font-extrabold mb-6 tracking-tight">쮼mergencia Sanitaria?</h2>
                    <p class="text-xl text-slate-300 mb-10 max-w-2xl mx-auto">
                        No dejes que el problema empeore. Cont치ctanos y recibe un diagn칩stico y presupuesto r치pido.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-5 justify-center">
                        <a href="tel:+56930153632"
                            class="bg-white text-slate-900 text-lg font-bold py-4 px-10 rounded-xl hover:bg-slate-100 transition shadow-lg transform hover:-translate-y-1">
                            <i class="fa-solid fa-phone mr-2"></i> Llamar Ahora
                        </a>
                        <a href="https://wa.me/56936470112"
                            class="bg-green-500 text-white text-lg font-bold py-4 px-10 rounded-xl hover:bg-green-600 transition shadow-lg shadow-green-500/25 transform hover:-translate-y-1 flex items-center justify-center gap-2">
                            <i class="fa-brands fa-whatsapp text-2xl"></i> Enviar WhatsApp
                        </a>
                    </div>
                    <p class="mt-6 text-sm text-slate-500">Atendemos domingos y festivos en horario de emergencia.</p>
                </div>
            </div>
        </div>
    </section>
</Layout>
